(function() {
    var Assist = {
        isMobile: {
            Android: function () {
                return navigator.userAgent.match(/Android/i);
            },
            BlackBerry: function () {
                return navigator.userAgent.match(/BlackBerry/i);
            },
            iOS: function () {
                return navigator.userAgent.match(/iPhone|iPad|iPod/i);
            },
            Opera: function () {
                return navigator.userAgent.match(/Opera Mini/i);
            },
            Windows: function () {
                return navigator.userAgent.match(/IEMobile/i);
            },
            any: function () {
                return ( Assist.isMobile.Android() || Assist.isMobile.BlackBerry() || Assist.isMobile.iOS() || Assist.isMobile.Opera() || Assist.isMobile.Windows() );
            }
        }
    };

    window.Assist = Assist;
}());
(function ( $ ) {
    $(document).ready(function(){
        var buttonMenu = $( '.header__icon-menu' ),
            buttonCatalogue = $('.catalogue__nav-text'),
            openClass = 'catalogue__nav-text--opened',
            buttonSelect = $('.catalogue__select'),
            optionSelect = $('.catalogue__droplist-item'),
            mobileButtonSelect = $('.mobile__list'),
            mobileOption = $('.mobile__droplist-item'),
            timeToggle = 100,
            timeEffect = 300;

        buttonCatalogue.on('click', function (e) {
            var selectId = $(this).data( 'select' ),
                selectList = $( '.catalogue__select--' + selectId );

            if(!$(this).hasClass(openClass)){
                closeCurrentSelectList();
                $(this).addClass(openClass);
                selectList.show( 'blind', timeToggle );
            } else {
                $(this).removeClass(openClass);
                selectList.hide( 'blind', timeToggle );
            };
            e.preventDefault();
        });

        function closeCurrentSelectList() {
            var currentButtonCatalogue = $('.catalogue__nav-text--opened'),
            currentSelectId = currentButtonCatalogue.data( 'select' ),
            currentSelectList = $( '.catalogue__select--' + currentSelectId );

            currentButtonCatalogue.removeClass(openClass);
            currentSelectList.hide( 'blind', timeToggle );
        };

        buttonSelect.on('click', function (e) {
            var droplistId = $(this).data( 'droplist' ),
                droplist = $(this).children( '.catalogue__droplist--' + droplistId );

            if(!$(this).hasClass('active')){
                $(this).addClass('active');
                droplist.show( 'blind', timeEffect );
            } else {
                $(this).removeClass('active');
                droplist.hide( 'blind', timeEffect );
            };

            e.preventDefault();
        });

        optionSelect.on('click', function (e) {
            var textOption = $(this).text();
            var currentFieldSelect = $(this).parent().prev('.catalogue__field');
            currentFieldSelect.text(textOption);
            currentFieldSelect.addClass('catalogue__field--checked')
            e.preventDefault();
        });

        function closeCurrentMobileSelect() {
            var currentMobileSelect = $('.mobile__list--opened'),
                currentMoblistId = currentMobileSelect.data( 'moblist' ),
                currentMoblist = $( '.mobile__dropdown--' + currentMoblistId );

            currentMobileSelect.removeClass('mobile__list--opened');
            currentMoblist.hide( 'blind', timeToggle );
        };

        mobileButtonSelect.on('click', function (e) {
            var moblistId = $(this).data( 'moblist' ),
                moblist = $( '.mobile__dropdown--' + moblistId );

            if(!$(this).hasClass('mobile__list--opened')){
                closeCurrentMobileSelect();
                !$(this).addClass('mobile__list--opened');
                moblist.show( 'blind', timeEffect );
            } else {
                !$(this).removeClass('mobile__list--opened');
                moblist.hide( 'blind', timeEffect );
            };

            e.preventDefault();
        });

        mobileOption.on('click', function (e) {
            var textOption = $(this).text(),
                currentMobileField = $(this).parents().prev('.mobile__field');

            currentMobileField.text(textOption);
            currentMobileField.addClass('mobile__field--checked');
            e.preventDefault();
        });
    })
}( jQuery, jQuery( window ) ));


(function ( $ ) {
    $(document).ready(function(){
        $('.startscreen__slider').slick({
            dots: true,
            infinite: true,
            speed: 500,
            fade: true,
            autoplay: true,
            arrows: false,
            autoplaySpeed: 2000,
            cssEase: 'linear'
        });

        $('.carousel').slick({
            infinite: true,
            slidesToShow: 6,
            slidesToScroll: 1,
            speed: 500,
            lazyLoad: 'ondemand',
            responsive: [
                {
                    breakpoint: 1024,
                    settings: {
                        slidesToShow: 4,
                    }
                },
                {
                    breakpoint: 767,
                    settings: {
                        slidesToShow: 2,
                        slidesToScroll: 2,
                        dots: true,
                        arrows: false
                    }
                }
            ]
        });

        var init = function() {
            $.gmap();
        };

        $( document ).on( 'DOMContentLoaded', init );
    });
}( jQuery, jQuery( window ) ));

(function ( $ ) {
    $(document).ready(function(){
        var buttonMenu = $( '.header__icon-menu' ),
            body = $( 'body' ),
            header = $('.header'),
            mobileMenu = $('.mobile'),
            buttonSublist = $('.mobile-nav__link--sublist'),
            mobileSublist= $('.mobile-nav__sublist'),
            openClass = 'mobile-nav__link--opened',
            timeEffect = 300,
            count = 0,
            countList = 0;

        function openMobile() {
            mobileMenu.show( 'blind', timeEffect );
            body.addClass('page--overlay');
        };

        function closeMobile() {
            mobileMenu.hide( 'blind', timeEffect );
            body.removeClass('page--overlay');
        };

        buttonMenu.on('click', function (e) {
            if (count === 0) {
                openMobile();
                count = 1;
            } else {
                closeMobile();
                count = 0;
            }
            e.preventDefault();
        });

        function closeCurrentSublist() {
            var currentButtonSublist = $('.mobile-nav__link--opened');
            var currentSublistId = currentButtonSublist.data( 'sublist' );
            var currentSublist = $( '.mobile-nav__sublist--' + currentSublistId );
            currentButtonSublist.removeClass(openClass);
            currentSublist.hide( 'blind', timeEffect );
        };

        buttonSublist.on('click', function (e) {
            var sublistId = $(this).data( 'sublist' );
            var sublist = $( '.mobile-nav__sublist--' + sublistId );

            if(!$(this).hasClass(openClass)){
                closeCurrentSublist();
                $(this).addClass(openClass);
                sublist.show( 'blind', timeEffect );
            } else {
                $(this).removeClass(openClass);
                sublist.hide( 'blind', timeEffect );
            }
            e.preventDefault();
        });
    })
}( jQuery, jQuery( window ) ));

(function ( $ ) {
    $( document ).ready(function(){
        var timeDelay = 200,
            galleryLink = $( '.product__photo-list .product__photo-img' ),
            navLink = $( '.header-nav__subitem-link' ),
            navItem = $('.header-nav__link'),
            navItemMore = $('.header-nav__item--more'),
            navLinkMore = navItemMore.find('.header-nav__link'),
            dropdown = '.header-nav__dropdown';

        var changeGalleryLink = function() {
            var srcImg = $(this).attr('src'),
                galleryImg = $(this).parents().find('.product__main-img');

            galleryImg.attr('src', srcImg);
        };

        var setHandlerIn = function() {
            clearTimeout( $.data( this,'timer' ) );
            $( dropdown,this ).stop( true,true ).show( 'blind', timeDelay );
            $(this).addClass('active');
        };

        var setHandlerOut = function() {
            $.data( this,'timer', setTimeout( $.proxy(function() {
                $( dropdown,this ).stop( true,true ).hide( 'blind', timeDelay );
                $(this).removeClass('active');
            }, this), 100));
        };

        var changeImgLink = function() {
            var srcImg = $(this).data('image'),
                activeNavItem = navItemMore.hasClass('active'),
                navImg = $('.active').find('.header-nav__img-item');

            navImg.attr('src', srcImg);
        };

        var onClickNav = function(e) {
            var button = $(this),
                dropdownList = button.next(dropdown),
                currentButton = $('.header-nav__item .active'),
                currentDropdownList = currentButton.next(dropdown);

            if (!$(this).hasClass('active')) {
                currentButton.removeClass('active');
                currentDropdownList.hide( 'blind', 300 );
                dropdownList.show( 'blind', 300 );
                $(this).addClass('active');
            } else {
                dropdownList.hide( 'blind', 300 );
                $(this).removeClass('active');
            }
            e.preventDefault();
        };

        galleryLink.on('mouseover', changeGalleryLink);

        if ( !Assist.isMobile.any() ) {
            navItemMore.hover( setHandlerIn, setHandlerOut);
            navLink.on('mouseover', changeImgLink);
        }

        if ( Assist.isMobile.any() ) {
            navLinkMore.on('click', onClickNav);
        }

        function scrollTo( target ) {
            var body = $( 'html, body' ),
                target = $( target );

            body.animate({
                scrollTop: $( target ).offset().top
            }, 1000);
        };

        navItem.on('click', function (e) {
            var button = $(this),
                product = $('.product'),
                target = button.attr( 'href' );

            if (target.substr( 0, 1 ) === '#') {
                if (product.length === 0) {
                    scrollTo( target );
                } else {
                    e.preventDefault()
                };
            }
        });

    })
}( jQuery, jQuery( window ) ));

(function ( $ ) {
    $(document).ready(function(){
        var header = $('.header'),
            headerFake = $('.header__fake'),
            buttonScroll = $('.footer__btn'),
            topPosition = $(window).scrollTop(),
            product = $('.product'),
            stretchClass = ('product--stretch'),
            contact = $('.contact');
            screenWidth = $( window ).width();

        function fixedHeader() {
            var dropdown = $( '.header-nav__dropdown' ),
                headerAdd = $('.header__add'),
                logoImg = $('.header-nav__item--logo'),
                timeEffect = 250,
                topPosition = $(window).scrollTop();

            if (topPosition >= 1){
                headerAdd.hide( 'blind', timeEffect );
                logoImg.show();
                headerFake.css('height','150px');
            } else {
                headerAdd.show('blind', timeEffect );
                logoImg.hide();
                headerFake.css('height','242px');
            }
        };

        if ( product.length > 0 || contact.length > 0 ) {
            header.removeClass('header__fix');
            headerFake.hide();
        }

        if ( screenWidth > 767 && (product.length === 0) && (contact.length === 0) ) {
            $( window ).on('scroll', fixedHeader);
        }

        buttonScroll.on('click', function (e) {
            var scrollTime = 2000;
            e.preventDefault();
            $('body,html').animate({
                'scrollTop':0
            },scrollTime);
        });

        function stretchProductPage() {
            var pageHeight = $( '.page__wrapper' ).outerHeight(),
                screenHeight = $( window ).outerHeight();

            if (screenHeight > pageHeight) {
                product.addClass(stretchClass);
            }
        };

        var changeStreching = function() {
            product.removeClass(stretchClass);
            stretchProductPage();
        };

        $(window).on('load', changeStreching);

        $(window).resize(changeStreching);
    });
}( jQuery, jQuery( window ) ));

